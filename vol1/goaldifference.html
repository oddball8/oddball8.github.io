<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Frank's Tumblr</title>
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v5.min.js"></script>
  </head>

<style>
  div#layout {
    text-align: center;
  }

  div#container {
    width: 1500px;
    height: 600px;
    margin: auto;
    background-color: #ffffff;
  }

  svg {
    width: 100%;
    height: 100%;
  }

  text.title {
    font-size: 40px;
    font-weight: 200;
    font-family: 'Permanent Marker', cursive;
  }

  text.label {
    font-size: 20px;
    font-weight: 300;
    font-family: 'Permanent Marker', cursive;
  }

  text.source {
    font-size: 12px;
    font-family: orator-std, monospace;
  }</style>
  <body>
    <div id='layout'>
      <!-- <h2>Bar chart example</h2> -->
      <div id='container'>
        <svg />
      </div>
    </div>

<script>const rawData = [

    {
    date: '1998',
    value: 13,
    colour: '#c3c3c3',
    httpLink: "France"
  },
  {
    date: '2000',
    value: 6,
    colour: '#c3c3c3',
    httpLink: "France"
  },
  {
    date: '2002',
    value: 14,
    colour: '#c3c3c3',
    httpLink: "Brazil"
  },
  {
    date: '2004',
    value: 3,
    colour: '#c3c3c3',
    httpLink: "Greece"
  },
  {
    date: '2006',
    value: 10,
    colour: '#c3c3c3',
    httpLink: "Italy"
  },
  {
    date: '2008',
    value: 9,
    colour: '#DAA520',
    httpLink: "Spain"
  },
  {
    date: '2010',
    value: 6,
    colour: '#DAA520',
    httpLink: "Spain World cup"
  },
  {
    date: '2012',
    value: 11,
    colour: '#DAA520',
    httpLink: "spain"
  },
  {
    date: '2014',
    value: 14,
    colour: '#c3c3c3',
    httpLink: "Germany"
  },
  {
    date: '2016',
    value: 4,
    colour: '#c3c3c3',
    httpLink: "Portugal"
  },
  {
    date: '2018',
    value: 8,
    colour: "#c3c3c3",
    httpLink: "France"
  }

];



const svg = d3.select('svg');
const svgContainer = d3.select('#container');

const margin = 80;
const width = 1500 - 2 * margin;
const height = 600 - 2 * margin;

const chart = svg.append('g')
  .attr('transform', `translate(${margin}, ${margin})`);

const xScale = d3.scaleBand()
  .range([0, width])
  .domain(rawData.map((s) => s.date))
  .padding(0.4)

const yScale = d3.scaleLinear()
  .range([height, 0])
  .domain([0, 15]);

const makeYLines = () => d3.axisLeft()
  .scale(yScale)

chart.append('g')
  .attr('transform', `translate(0, ${height})`)
  .call(d3.axisBottom(xScale))
  .selectAll('text').remove();

chart.append('g')
  .call(d3.axisLeft(yScale));

const barGroups = chart.selectAll()
  .data(rawData)
  .enter()
  .append('g')

barGroups
  .append('rect')
  .attr('fill', function(d) {
    return d.colour
  })
  .attr('x', (g) => xScale(g.date))
  .attr('y', (g) => yScale(g.value))
  .attr('height', (g) => height - yScale(g.value))
  .attr('width', xScale.bandwidth())


  .on("click", function(d) {
    if (d.httpLink) {
      var win = window.open(d.httpLink, '_blank');
      win.focus();
    }
  })

  .on("mouseover", function(d) {
    d3.select(this).style("fill", function(d) {
      return '#000000'
    })
    d3.select(this).style("cursor", "pointer");
  })

  .on("mouseout", function(d) {
    d3.select(this).style('fill', function(d) {
      return d.colour
    })
    d3.select(this).style("cursor", "default");
  })

svg
  .append('text')
  .attr('class', 'label')
  .attr('x', -(height / 2) - margin)
  .attr('y', margin / 2.4)
  .attr('transform', 'rotate(-90)')
  .attr('text-anchor', 'middle')
  .text('goal difference')
/*
svg.append('text')
  .attr('class', 'label')
  .attr('x', width / 2 + margin)
  .attr('y', height + margin * 1.4)
  .attr('text-anchor', 'middle')
  .text("time (months) sept 2010 - dec 2018")*/

svg.append('text')
  .attr('class', 'title')
  .attr('x', width / 10 + margin)
  .attr('y', 40)
  .attr('text-anchor', 'middle')
  .text("Goal Difference: Euro & World Cup winning teams: 1998-2018")

svg.append('text')
  .attr('class', 'source')
  .attr('x', width - margin * 1.7)
  .attr('y', height + margin * 1.7)
  .attr('text-anchor', 'start')
  .text('source:')</script>
  </body>

</html>
